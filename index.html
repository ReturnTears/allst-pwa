<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>allst-pwa</title>
    <!-- <link rel="manifest" href="./src/assets/manifest.json"/> -->
    <link rel="manifest" href="manifest.json"/>
  </head>
  <body>
    <h1>第一个PWA</h1>
    <h2>MY FIRST PWA</h2>
    <div>
      <h3>主线程和Worker线程的消息通信</h3>
      <button id="send">发送消息</button>
      <script>
        const worker = new Worker("worker.js")
        document.getElementById("send").onclick = () => {
          worker.postMessage({
            type: "send"
          });
        };
        worker.onmessage = e => {
          console.log("收到 worker 消息", e.data)
        };
      </script>
    </div>
    <div id="app"></div>
  </body>
  <script type="module">
    navigator.serviceWorker
    .register("sw.js")
    .then(() => {
      console.log('sw.js 注册成功');
    }).catch(e => {
      console.log('sw.js 注册失败', e);
    })
  </script>
</html>
