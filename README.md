# allst-pwa

> A Vue.js project

## Build Setup

``` bash
# install dependencies
npm install

# serve with hot reload at localhost:8080
npm run dev

# build for production with minification
npm run build

# build for production and view the bundle analyzer report
npm run build --report

# run unit tests
npm run unit

# run e2e tests
npm run e2e

# run all tests
npm test
```

For a detailed explanation on how things work, check out the [guide](http://vuejs-templates.github.io/webpack/) and [docs for vue-loader](http://vuejs.github.io/vue-loader).

## PWA
``` text
ðŸŽ PWAç›¸å…³æ¦‚å¿µä»‹ç»
ðŸ’ Progressive Web App, ç®€ç§°PWA, æ˜¯æå‡ Web App çš„ä½“éªŒçš„ä¸€ç§æ–°æ–¹æ³•ï¼Œèƒ½ç»™ç”¨æˆ·åŽŸç”Ÿåº”ç”¨çš„ä½“éªŒ
    PWAæ˜¯æ¸è¿›å¼Webå¼€å‘æŠ€æœ¯
    PWAåŒæ—¶å…·å¤‡äº†webåº”ç”¨ä¸ŽåŽŸç”Ÿåº”ç”¨çš„ä¼˜ç‚¹
    PWA èƒ½åšåˆ°åŽŸç”Ÿåº”ç”¨çš„ä½“éªŒä¸æ˜¯é ç‰¹æŒ‡æŸä¸€é¡¹æŠ€æœ¯ï¼Œè€Œæ˜¯ç»è¿‡åº”ç”¨ä¸€äº›æ–°æŠ€æœ¯è¿›è¡Œæ”¹è¿›ï¼Œåœ¨å®‰å…¨ã€æ€§èƒ½å’Œä½“éªŒä¸‰ä¸ªæ–¹é¢éƒ½æœ‰å¾ˆå¤§æå‡ï¼ŒPWA æœ¬è´¨ä¸Šæ˜¯ Web Appï¼Œå€ŸåŠ©ä¸€äº›æ–°æŠ€æœ¯ä¹Ÿå…·å¤‡äº† Native App çš„ä¸€äº›ç‰¹æ€§ï¼Œå…¼å…· Web App å’Œ Native App çš„ä¼˜ç‚¹ã€‚

ðŸ’ PWAæ¼”å˜è¿‡ç¨‹
    ä»ŽHybridåˆ°PWAï¼Œä»Žå°é—­åˆ°å¼€æ”¾

ðŸ’ PWAç‰¹å¾
    å®‰å…¨ã€å¯é ã€ç²˜æ€§
    ðŸ‘ æ¸è¿›å¢žå¼º
    ðŸ‘ å“åº”å¼ç”¨æˆ·ç•Œé¢
    ðŸ‘ ä¸ä¾èµ–ç½‘ç»œè¿žæŽ¥
    ðŸ‘ ç±»åŽŸç”Ÿåº”ç”¨
    ðŸ‘ æŒç»­æ›´æ–°
    ðŸ‘ å®‰å…¨
    ðŸ‘ å¯å‘çŽ°
    ðŸ‘ å†æ¬¡è®¿é—®
    ðŸ‘ å¯å®‰è£…
    ðŸ‘ å¯è¿žæŽ¥æ€§

ðŸŽ PWAç›¸å…³æŠ€æœ¯ä»‹ç»
ðŸ’ Web App Manifest
    æœ‰å”¯ä¸€çš„å›¾æ ‡å’Œåç§°æ¥ä¸Žå…¶ä»–ç«™ç‚¹åŒºåˆ†
    æŽ§åˆ¶ä»Žä¸»å±å¹•å¯åŠ¨æ—¶çš„å†…å®¹ï¼Œ é¿å…ç”Ÿç¡¬çš„è¿‡æ¸¡
    éšè—æµè§ˆå™¨ç›¸å…³çš„UI

ðŸ’ Service Worker
    æµè§ˆå™¨å†åŽå°ç‹¬ç«‹äºŽç½‘é¡µè¿è¡Œçš„è„šæœ¬
    æ‹¦æˆªå’Œå¤„ç†ç½‘ç»œè¯·æ±‚ï¼Œæ“ä½œç¼“å­˜
    æ”¯æŒPush API
    åŽå°åŒæ­¥ & æ›´æ–°ç¼“å­˜

    ðŸ“ Service Worker ç®€ä»‹
    èƒŒæ™¯ï¼šå¦‚ä½•è®©ç½‘é¡µçš„ç”¨æˆ·ä½“éªŒåšåˆ°æžè‡´
    éšç€ Web çš„å¿«é€Ÿå‘å±•ï¼Œç”¨æˆ·å¯¹ç«™ç‚¹çš„ä½“éªŒæœŸæœ›å€¼è¶Šæ¥è¶Šé«˜ï¼Œæƒ³è¦è®©è‡ªå·±çš„äº§å“åœ¨æ— æ•°äº§å“ä¸­è„±é¢–è€Œå‡ºï¼Œå°±å¿…é¡»æå‡äº§å“çš„æ€§èƒ½å’Œä½“éªŒã€‚
    å‰ç«¯å·¥ç¨‹å¸ˆæœ‰å¾ˆå¤šæ€§èƒ½ä¼˜åŒ–çš„æ‰‹æ®µï¼ŒåŒ…æ‹¬ CDNã€CSS Spriteã€æ–‡ä»¶çš„åˆå¹¶åŽ‹ç¼©ã€å¼‚æ­¥åŠ è½½ã€èµ„æºç¼“å­˜ç­‰ç­‰ã€‚
    ä»€ä¹ˆæ˜¯ Service Worker ?
    W3C ç»„ç»‡æ—©åœ¨ 2014 å¹´ 5 æœˆå°±æå‡ºè¿‡ Service Worker è¿™æ ·çš„ä¸€ä¸ª HTML5 API ï¼Œä¸»è¦ç”¨æ¥åšæŒä¹…çš„ç¦»çº¿ç¼“å­˜ã€‚
    Service Worker æœ‰ä»¥ä¸‹åŠŸèƒ½å’Œç‰¹æ€§ï¼š
    ðŸ¥ ä¸€ä¸ªç‹¬ç«‹çš„ worker çº¿ç¨‹ï¼Œç‹¬ç«‹äºŽå½“å‰ç½‘é¡µè¿›ç¨‹ï¼Œæœ‰è‡ªå·±ç‹¬ç«‹çš„ worker contextã€‚
    ðŸ¥ ä¸€æ—¦è¢« installï¼Œå°±æ°¸è¿œå­˜åœ¨ï¼Œé™¤éžè¢«æ‰‹åŠ¨ unregister
    ðŸ¥ ç”¨åˆ°çš„æ—¶å€™å¯ä»¥ç›´æŽ¥å”¤é†’ï¼Œä¸ç”¨çš„æ—¶å€™è‡ªåŠ¨ç¡çœ 
    ðŸ¥ å¯ç¼–ç¨‹æ‹¦æˆªä»£ç†è¯·æ±‚å’Œè¿”å›žï¼Œç¼“å­˜æ–‡ä»¶ï¼Œç¼“å­˜çš„æ–‡ä»¶å¯ä»¥è¢«ç½‘é¡µè¿›ç¨‹å–åˆ°ï¼ˆåŒ…æ‹¬ç½‘ç»œç¦»çº¿çŠ¶æ€ï¼‰
    ðŸ¥ ç¦»çº¿å†…å®¹å¼€å‘è€…å¯æŽ§
    ðŸ¥ èƒ½å‘å®¢æˆ·ç«¯æŽ¨é€æ¶ˆæ¯
    ðŸ¥ ä¸èƒ½ç›´æŽ¥æ“ä½œ DOM
    ðŸ¥ å¿…é¡»åœ¨ HTTPS çŽ¯å¢ƒä¸‹æ‰èƒ½å·¥ä½œ
    ðŸ¥ å¼‚æ­¥å®žçŽ°ï¼Œå†…éƒ¨å¤§éƒ½æ˜¯é€šè¿‡ Promise å®žçŽ°
    ðŸ“ æ€Žä¹ˆä½¿ç”¨Service Worker
    ðŸ‡ å‰ææ¡ä»¶
    Service Worker å‡ºäºŽå®‰å…¨æ€§å’Œå…¶å®žçŽ°åŽŸç†ï¼Œåœ¨ä½¿ç”¨çš„æ—¶å€™æœ‰ä¸€å®šçš„å‰ææ¡ä»¶ã€‚
    ðŸ¥ ç”±äºŽ Service Worker è¦æ±‚ HTTPS çš„çŽ¯å¢ƒï¼Œæˆ‘ä»¬é€šå¸¸å¯ä»¥å€ŸåŠ©äºŽ github page è¿›è¡Œå­¦ä¹ è°ƒè¯•ã€‚å½“ç„¶ä¸€èˆ¬æµè§ˆå™¨å…è®¸è°ƒè¯• Service Worker çš„æ—¶å€™ host ä¸º localhost æˆ–è€… 127.0.0.1 ä¹Ÿæ˜¯ ok çš„ã€‚
    ðŸ¥ Service Worker çš„ç¼“å­˜æœºåˆ¶æ˜¯ä¾èµ– Cache API å®žçŽ°çš„
    ðŸ¥ ä¾èµ– HTML5 fetch API
    ðŸ¥ ä¾èµ– Promise å®žçŽ°
    ðŸ‡ æ³¨å†Œ
    è¦å®‰è£… Service Workerï¼Œ æˆ‘ä»¬éœ€è¦é€šè¿‡åœ¨ js ä¸»çº¿ç¨‹ï¼ˆå¸¸è§„çš„é¡µé¢é‡Œçš„ js ï¼‰æ³¨å†Œ Service Worker æ¥å¯åŠ¨å®‰è£…ï¼Œè¿™ä¸ªè¿‡ç¨‹å°†ä¼šé€šçŸ¥æµè§ˆå™¨æˆ‘ä»¬çš„ Service Worker çº¿ç¨‹çš„ javaScript æ–‡ä»¶åœ¨ä»€ä¹ˆåœ°æ–¹å‘†ç€ã€‚
    ðŸŒ æŸ¥çœ‹æ˜¯å¦æ³¨å†ŒæˆåŠŸ
    å¦‚æžœä½ å¾ˆå›°æƒ‘ï¼Œæˆ‘çš„ Service Worker åˆ°åº•æ³¨å†ŒæˆåŠŸæ²¡æœ‰å‘¢ï¼Ÿæ³¨å†ŒæˆåŠŸæ˜¯ä»€ä¹ˆæ ·å­å‘¢ï¼Ÿ
    å¯ä»¥åœ¨ PC ä¸Šæ‰“å¼€æˆ‘ä»¬çš„å¥½ä¼™ä¼´ chrome æµè§ˆå™¨, è¾“å…¥ chrome://inspect/#service-workers
    ðŸŒ æ³¨å†Œå¤±è´¥çš„åŽŸå› 
    ä¸ºå•¥ä¼šå¯¼è‡´ Service Worker æ³¨å†Œå¤±è´¥å‘¢ï¼ŸåŽŸå› åŸºæœ¬å°±æ˜¯ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š
    ä¸æ˜¯ HTTPS çŽ¯å¢ƒï¼Œä¸æ˜¯ localhost æˆ– 127.0.0.1ã€‚
    Service Worker æ–‡ä»¶çš„åœ°å€æ²¡æœ‰å†™å¯¹ï¼Œéœ€è¦ç›¸å¯¹äºŽ originã€‚
    Service Worker æ–‡ä»¶åœ¨ä¸åŒçš„ origin ä¸‹è€Œä¸æ˜¯ä½ çš„ App çš„ï¼Œè¿™æ˜¯ä¸è¢«å…è®¸çš„ã€‚
    ðŸ‡ å®‰è£…
    åœ¨ä½ çš„ Service Worker æ³¨å†ŒæˆåŠŸä¹‹åŽå‘¢ï¼Œæˆ‘ä»¬çš„æµè§ˆå™¨ä¸­å·²ç»æœ‰äº†ä¸€ä¸ªå±žäºŽä½ è‡ªå·± web App çš„ worker context å•¦ï¼Œ åœ¨æ­¤æ—¶ï¼Œæµè§ˆå™¨å°±ä¼šé©¬ä¸åœè¹„çš„å°è¯•ä¸ºä½ çš„ç«™ç‚¹é‡Œé¢çš„é¡µé¢å®‰è£…å¹¶æ¿€æ´»å®ƒï¼Œå¹¶ä¸”åœ¨è¿™é‡Œå¯ä»¥æŠŠé™æ€èµ„æºçš„ç¼“å­˜ç»™åŠžäº†ã€‚
    install äº‹ä»¶æˆ‘ä»¬ä¼šç»‘å®šåœ¨ Service Worker æ–‡ä»¶ä¸­ï¼Œåœ¨ Service Worker å®‰è£…æˆåŠŸåŽï¼Œinstall äº‹ä»¶è¢«è§¦å‘ã€‚
    install äº‹ä»¶ä¸€èˆ¬æ˜¯è¢«ç”¨æ¥å¡«å……ä½ çš„æµè§ˆå™¨çš„ç¦»çº¿ç¼“å­˜èƒ½åŠ›ã€‚ä¸ºäº†è¾¾æˆè¿™ä¸ªç›®çš„ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† Service Worker æ–°çš„æ ‡å¿—æ€§çš„å­˜å‚¨ cache API â€” ä¸€ä¸ª Service Worker ä¸Šçš„å…¨å±€å¯¹è±¡ï¼Œå®ƒä½¿æˆ‘ä»¬å¯ä»¥å­˜å‚¨ç½‘ç»œå“åº”å‘æ¥çš„èµ„æºï¼Œå¹¶ä¸”æ ¹æ®å®ƒä»¬çš„è¯·æ±‚æ¥ç”Ÿæˆkeyã€‚è¿™ä¸ª API å’Œæµè§ˆå™¨çš„æ ‡å‡†çš„ç¼“å­˜å·¥ä½œåŽŸç†å¾ˆç›¸ä¼¼ï¼Œä½†æ˜¯æ˜¯åªå¯¹åº”ä½ çš„ç«™ç‚¹çš„åŸŸçš„ã€‚å®ƒä¼šä¸€ç›´æŒä¹…å­˜åœ¨ï¼Œç›´åˆ°ä½ å‘Šè¯‰å®ƒä¸å†å­˜å‚¨ï¼Œä½ æ‹¥æœ‰å…¨éƒ¨çš„æŽ§åˆ¶æƒã€‚

ðŸ’ Push Api & Notification Api

ðŸ’ App Shell & App Skeleton

ðŸ’ ç›¸å…³Other API

```


## PWAå¼€å‘å®žæˆ˜
```text
@Date 2020-04-01

First Chapter æ¸è¿›å¼Webåº”ç”¨ä»‹ç»
æ¸è¿›å¼Webåº”ç”¨æ˜¯æ˜¯ä¸€ç§å´­æ–°çš„Webåº”ç”¨ï¼Œå®ƒç»“åˆäº†åŽŸç”Ÿåº”ç”¨çš„ä¼˜ç‚¹å’ŒWebå°‘å†²çªçš„ç‰¹ç‚¹

ä»»ä½•æ¸è¿›å¼Webåº”ç”¨çš„æ ¸å¿ƒå°±æ˜¯ service worker æŠ€æœ¯ã€‚
service workeræ˜¯ä¸€ç§è„šæœ¬ï¼Œå¯ä»¥é€šè¿‡æ³¨å†Œä»–æ¥æŽ§åˆ¶ä½ ç«™ç‚¹ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªé¡µé¢ã€‚ä¸€æ—¦å®‰è£…å®Œæ¯•ï¼Œ
service workerå°±ä¼šç‹¬ç«‹å­˜åœ¨ï¼Œè€Œä¸æ˜¯å±žäºŽæŸä¸ªæµè§ˆå™¨çª—å£æˆ–è€…æ ‡ç­¾é¡µã€‚
service workerå¯ä»¥ç›‘å¬å¹¶å“åº”åœ¨å…¶æŽ§åˆ¶ä¹‹ä¸‹çš„æ‰€æœ‰é¡µé¢çš„äº‹ä»¶ã€‚

ðŸŽ æ¸è¿›å¢žå¼º

ðŸŽ Httpså’Œservice worker

ðŸŽ ä»ŽwebèŽ·å–å†…å®¹
    fetchæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¼ºåˆ¶å¿…ä¼ çš„ï¼Œ å¯ä»¥åŒ…å«ä¸€ä¸ªrequestå¯¹è±¡ï¼Œä¹Ÿå¯ä»¥åŒ…å«ä¸€ä¸ªç›¸å¯¹è·¯å¾„æˆ–è€…ç»å¯¹è·¯å¾„çš„URLå­—ç¬¦ä¸²ã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¯é€‰çš„ï¼Œå¯ä»¥åŒ…å«ä¸€ä¸ªå¯¹è±¡ï¼Œé‡Œé¢æ˜¯è¯·æ±‚çš„é€‰é¡¹ã€‚
ðŸŽ æ•èŽ·ç¦»çº¿è¯·æ±‚

ðŸŽ CacheStorage Api
    CacheStorageæ˜¯ä¸€ä¸ªå…¨æ–°çš„ç¼“å­˜å±‚ï¼Œä½ æ‹¥æœ‰å®Œå…¨çš„æŽ§åˆ¶æƒã€‚
    å°†service workerå’ŒCacheStorageçš„èƒ½åŠ›ç»“åˆåœ¨ä¸€èµ·ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç¨‹åºç›´æŽ¥æŽ§åˆ¶ç¼“å­˜é‚£äº›å†…å®¹ï¼Œåˆ é™¤é‚£äº›ç¼“å­˜ï¼Œä»¥åŠé‚£äº›å†…å®¹ä»Žç¼“å­˜è¿”å›žï¼Œé‚£äº›å†…å®¹ä»Žç½‘ç»œè¿”å›žã€‚

    service workerçš„ç”Ÿå‘½å‘¨æœŸï¼š
    å®‰è£…ä¸­ --> æ¿€æ´»ä¸­ --> å·²æ¿€æ´»
    

```